import{_ as R,M as w,c as d,o as c,h as e,j as z,f as o,b as l,d as i,F as g,m as v,n as N,e as m,E as u,t as r,a as B,g as y}from"./index-CeHthxjz.js";const E={components:{Search:w},data(){return{loading:!0,user:JSON.parse(localStorage.getItem("user")).user,searchContent:"",userType:-1,userIdentity:[],count:5,myRepositys:[]}},props:{},methods:{search(){location.href="/search?content="+this.searchContent},load(){this.count>this.myRepositys.length||this.count++},createResposity(){location.href="/new"},handleCommand(t){u(`click on item ${t}`)},handleChange(t){m.post("/house/list",{type:this.userType==-1?0:1,creatorId:this.user.id,origizationId:this.userType==-1?null:this.userIdentity[this.userType].id}).then(s=>{s.data.status==200?(this.myRepositys=s.data.data,console.log(this.myRepositys)):u(s.data.message)})},async loadMore(){this.count<=this.myRepositys.length&&(this.count+=5,await this.$nextTick(),this.$refs.observer.disconnect())}},created(){m.post("/user/getIdentityList/"+this.user.id).then(t=>{t.data.status==200?this.userIdentity=t.data.data:u(t.data.message)}),m.post("/house/list",{type:this.userType==-1?0:1,creatorId:this.user.id,origizationId:this.userType==-1?null:this.userIdentity[this.userType].id}).then(t=>{t.data.status==200?this.myRepositys=t.data.data:u(t.data.message)})}},M={class:"sidebar"},j={class:"profile-card"},F=["src"],L={class:"profile-info"},U={class:"option-content"},D={class:"option-content"},J={class:"repo-actions"},O={class:"search-box"},q={key:0,class:"loading-container"},A={class:"content-area"},G={class:"repo-list"},H={class:"repo-header"},K={class:"repo-name"},P={class:"repo-meta"},Q={class:"badge"},W={class:"meta-item"},X={class:"repo-desc"},Y={class:"repo-stats"},Z={class:"stat-item"},$={class:"stat-item"};function ee(t,s,se,te,a,_){const f=i("el-option"),C=i("el-select"),k=i("el-button"),b=i("Search"),h=i("el-icon"),x=i("el-input"),I=i("el-progress"),T=i("Star"),S=i("Share"),V=i("el-link");return c(),d("div",{class:N(["container",{"mobile-view":t.mobile}])},[e("aside",M,[e("div",j,[e("img",{src:a.user.av,class:"user-avatar"},null,8,F),e("div",L,[o(C,{modelValue:a.userType,"onUpdate:modelValue":s[0]||(s[0]=n=>a.userType=n),"popper-class":"org-select-dropdown",onChange:_.handleChange},{default:l(()=>[o(f,{label:a.user.name,value:-1,class:"profile-option"},{default:l(()=>[e("div",U,[e("span",null,r(a.user.name),1)])]),_:1},8,["label"]),(c(!0),d(g,null,v(a.userIdentity,(n,p)=>(c(),B(f,{key:p,value:p,class:"profile-option"},{default:l(()=>[e("div",D,[e("span",null,r(n.name),1)])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","onChange"])])]),e("div",J,[o(k,{type:"primary",icon:"el-icon-plus",onClick:_.createResposity,class:"new-repo-btn",size:"small",style:{"margin-top":"10px","margin-bottom":"10px"}},{default:l(()=>s[2]||(s[2]=[y(" 新建仓库 ")])),_:1},8,["onClick"]),e("div",O,[o(x,{modelValue:a.searchContent,"onUpdate:modelValue":s[1]||(s[1]=n=>a.searchContent=n),placeholder:"搜索仓库...","suffix-icon":"el-icon-search",class:"repo-search",size:"small"},{prefix:l(()=>[o(h,{onClick:_.search},{default:l(()=>[o(b)]),_:1},8,["onClick"])]),_:1},8,["modelValue"])])]),a.loading?(c(),d("div",q,[o(I,{percentage:100,status:"success",indeterminate:!0,class:"custom-progress"}),s[3]||(s[3]=e("p",{class:"loading-text"},"正在加载活动数据...",-1))])):z("",!0)]),e("main",A,[e("ul",G,[(c(!0),d(g,null,v(a.myRepositys,(n,p)=>(c(),d("li",{key:p,class:"repo-card"},[o(V,{href:"/project?id="+n.id,class:"repo-link"},{default:l(()=>[e("div",H,[e("h3",K,r(n.name),1),e("div",P,[e("span",Q,r(n.kind==0?"public":"private"),1),e("span",W,r(n.language),1)])]),e("p",X,r(n.description||"暂无描述"),1),e("div",Y,[e("div",Z,[o(h,{class:"stat-icon"},{default:l(()=>[o(T)]),_:1}),s[4]||(s[4]=y(" "+r(0)))]),e("div",$,[o(h,{class:"stat-icon"},{default:l(()=>[o(S)]),_:1}),s[5]||(s[5]=y(" "+r(0)))])])]),_:2},1032,["href"])]))),128))])])],2)}const ne=R(E,[["render",ee],["__scopeId","data-v-9f034f5e"]]);export{ne as default};
