import{_ as R,s as w,c as d,o as c,h as e,i as z,f as a,b as l,d as i,F as f,m as v,n as N,e as m,E as u,t as r,a as B,g as y}from"./index-oqa1SwAd.js";const E={components:{Search:w},data(){return{loading:!0,user:JSON.parse(localStorage.getItem("user")).user,searchContent:"",userType:-1,userIdentity:[],count:5,myRepositys:[]}},props:{},methods:{search(){location.href="/search?content="+this.searchContent},load(){this.count>this.myRepositys.length||this.count++},createResposity(){location.href="/new"},handleCommand(t){u(`click on item ${t}`)},handleChange(t){m.post("/house/list",{type:this.userType==-1?0:1,creatorId:this.user.id,origizationId:this.userType==-1?null:this.userIdentity[this.userType].id}).then(s=>{s.data.status==200?(this.myRepositys=s.data.data,console.log(this.myRepositys)):u(s.data.message)})},async loadMore(){this.count<=this.myRepositys.length&&(this.count+=5,await this.$nextTick(),this.$refs.observer.disconnect())}},created(){m.post("/user/getIdentityList/"+this.user.id).then(t=>{t.data.status==200?this.userIdentity=t.data.data:u(t.data.message)}),m.post("/house/list",{type:this.userType==-1?0:1,creatorId:this.user.id,origizationId:this.userType==-1?null:this.userIdentity[this.userType].id}).then(t=>{t.data.status==200?this.myRepositys=t.data.data:u(t.data.message)})}},j={class:"sidebar"},F={class:"profile-card"},L={class:"profile-info"},M={class:"option-content"},U=["src"],D={class:"option-content"},J=["src"],O={class:"repo-actions"},q={class:"search-box"},A={key:0,class:"loading-container"},G={class:"content-area"},H={class:"repo-list"},K={class:"repo-header"},P={class:"repo-name"},Q={class:"repo-meta"},W={class:"badge"},X={class:"meta-item"},Y={class:"repo-desc"},Z={class:"repo-stats"},$={class:"stat-item"},ee={class:"stat-item"};function se(t,s,te,oe,n,_){const g=i("el-option"),C=i("el-select"),k=i("el-button"),b=i("Search"),h=i("el-icon"),x=i("el-input"),I=i("el-progress"),T=i("Star"),S=i("Share"),V=i("el-link");return c(),d("div",{class:N(["container",{"mobile-view":t.mobile}])},[e("aside",j,[e("div",F,[s[2]||(s[2]=e("img",{src:"/images/36727057.jpg",class:"user-avatar"},null,-1)),e("div",L,[a(C,{modelValue:n.userType,"onUpdate:modelValue":s[0]||(s[0]=o=>n.userType=o),"popper-class":"org-select-dropdown",onChange:_.handleChange},{default:l(()=>[a(g,{label:n.user.name,value:-1,class:"profile-option"},{default:l(()=>[e("div",M,[e("img",{src:n.user.avatar,class:"option-avatar"},null,8,U),e("span",null,r(n.user.name),1)])]),_:1},8,["label"]),(c(!0),d(f,null,v(n.userIdentity,(o,p)=>(c(),B(g,{key:p,value:p,class:"profile-option"},{default:l(()=>[e("div",D,[e("img",{src:o.avatar,class:"option-avatar"},null,8,J),e("span",null,r(o.name),1)])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","onChange"])])]),e("div",O,[a(k,{type:"primary",icon:"el-icon-plus",onClick:_.createResposity,class:"new-repo-btn",size:"small",style:{"margin-top":"10px","margin-bottom":"10px"}},{default:l(()=>s[3]||(s[3]=[y(" 新建仓库 ")])),_:1},8,["onClick"]),e("div",q,[a(x,{modelValue:n.searchContent,"onUpdate:modelValue":s[1]||(s[1]=o=>n.searchContent=o),placeholder:"搜索仓库...","suffix-icon":"el-icon-search",class:"repo-search",size:"small"},{prefix:l(()=>[a(h,{onClick:_.search},{default:l(()=>[a(b)]),_:1},8,["onClick"])]),_:1},8,["modelValue"])])]),n.loading?(c(),d("div",A,[a(I,{percentage:100,status:"success",indeterminate:!0,class:"custom-progress"}),s[4]||(s[4]=e("p",{class:"loading-text"},"正在加载活动数据...",-1))])):z("",!0)]),e("main",G,[e("ul",H,[(c(!0),d(f,null,v(n.myRepositys,(o,p)=>(c(),d("li",{key:p,class:"repo-card"},[a(V,{href:"/project?id="+o.id,class:"repo-link"},{default:l(()=>[e("div",K,[e("h3",P,r(o.name),1),e("div",Q,[e("span",W,r(o.kind==0?"public":"private"),1),e("span",X,r(o.language),1)])]),e("p",Y,r(o.description||"暂无描述"),1),e("div",Z,[e("div",$,[a(h,{class:"stat-icon"},{default:l(()=>[a(T)]),_:1}),s[5]||(s[5]=y(" "+r(0)))]),e("div",ee,[a(h,{class:"stat-icon"},{default:l(()=>[a(S)]),_:1}),s[6]||(s[6]=y(" "+r(0)))])])]),_:2},1032,["href"])]))),128))])])],2)}const ne=R(E,[["render",se],["__scopeId","data-v-43d1e6de"]]);export{ne as default};
