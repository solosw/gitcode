import{_ as k,c as x,o as r,h as V,f as l,b as i,d,e as c,E as u,N as z,a as p,j as C,g,t as y}from"./index-CeHthxjz.js";const N={computed:{UserFilled(){return z}},data(){return{addName:"",dialogVisible1:!1,user:JSON.parse(localStorage.getItem("user")).user,organizations:[{name:"组织1",createTime:"2023-01-01 12:00:00",description:"这是一个公开的组织",members:[{name:"用户A",role:"管理员"},{name:"用户B",role:"成员"}]},{name:"组织2",createTime:"2023-02-01 13:00:00",description:"这是一个私有的组织",members:[{name:"用户C",role:"管理员"},{name:"用户D",role:"成员"}]}],dialogVisible:!1,selectedOrganization:{},row:null}},methods:{add(){c.post("/ori/addUser/"+this.addName+"/"+this.row.id).then(a=>{a.data.status==200?(location.reload(),u("Success")):u(a.data.message)})},handleRowClick(a){this.selectedOrganization=a,this.dialogVisible=!0},addOrzUser(a){this.row=a,this.dialogVisible1=!0},exit(a){c.post("/ori/exit/"+this.user.id+"/"+a).then(e=>{e.data.status==200?u("Success"):u(e.data.message)})}},created(){c.post("/ori/getMyOrifization/"+this.user.id).then(a=>{a.data.status==200&&(this.organizations=a.data.data,console.log(this.organizations))})}},v={style:{width:"1000px"}};function O(a,e,U,B,o,n){const _=d("el-avatar"),s=d("el-table-column"),m=d("el-button"),b=d("el-table"),f=d("el-dialog"),h=d("el-input");return r(),x("div",v,[e[6]||(e[6]=V("h2",null,"我的组织",-1)),l(b,{data:o.organizations,style:{width:"1000px"},onRowDblclick:n.handleRowClick},{default:i(()=>[l(s,{width:"200"},{default:i(t=>[t.row.av?(r(),p(_,{key:0,size:80,src:t.row.av,style:{"margin-right":"20px"}},null,8,["src"])):(r(),p(_,{key:1,size:80,icon:n.UserFilled,style:{"margin-right":"20px"}},null,8,["icon"]))]),_:1}),l(s,{prop:"name",label:"名称",width:"200"}),l(s,{prop:"createTime",label:"创建时间",width:"200"}),l(s,{prop:"description",label:"描述"}),l(s,{label:"操作"},{default:i(({row:t})=>[l(m,{onClick:w=>n.exit(t.id)},{default:i(()=>e[3]||(e[3]=[g("退出")])),_:2},1032,["onClick"]),t.creatorId==o.user.id?(r(),p(m,{key:0,onClick:w=>n.addOrzUser(t)},{default:i(()=>e[4]||(e[4]=[g("添加成员")])),_:2},1032,["onClick"])):C("",!0)]),_:1})]),_:1},8,["data","onRowDblclick"]),l(f,{title:"成员信息",modelValue:o.dialogVisible,"onUpdate:modelValue":e[0]||(e[0]=t=>o.dialogVisible=t),width:"50%"},{default:i(()=>[l(b,{data:o.selectedOrganization.members,style:{width:"100%"}},{default:i(()=>[l(s,{prop:"name",label:"成员名称",width:"200"}),l(s,{label:"角色"},{default:i(({row:t})=>[V("span",null,y(o.selectedOrganization.creatorId==t.id?"管理员":"成员"),1)]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"]),l(f,{title:"添加成员",modelValue:o.dialogVisible1,"onUpdate:modelValue":e[2]||(e[2]=t=>o.dialogVisible1=t),width:"50%"},{default:i(()=>[l(h,{placeholder:"用户名",modelValue:o.addName,"onUpdate:modelValue":e[1]||(e[1]=t=>o.addName=t)},null,8,["modelValue"]),l(m,{onClick:n.add},{default:i(()=>e[5]||(e[5]=[g("确定")])),_:1},8,["onClick"])]),_:1},8,["modelValue"])])}const D=k(N,[["render",O],["__scopeId","data-v-916613ac"]]);export{D as default};
