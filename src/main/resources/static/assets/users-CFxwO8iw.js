import{_ as h,c as w,o as b,h as x,f as e,b as l,d as o,e as u,E as a,O as V,g as f}from"./index-CeHthxjz.js";const g={data(){return{users:[],newUser:{name:"",password:""},editUser:null}},methods:{fetchUsers(){u.post("/user/all").then(s=>{s.data.status===200&&(this.users=s.data.data)})},addUser(){u.post("/user/add",this.newUser).then(s=>{s.data.status===200?(a.success("添加成功"),this.fetchUsers(),this.newUser={name:"",password:""}):a.error(s.data.message)})},deleteUser(s){V.confirm("确定要删除该用户吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{u.post("/user/delete",s).then(t=>{t.data.status===200?(a.success("删除成功"),this.fetchUsers()):a.error(t.data.message)})}).catch(()=>{a.info("已取消删除")})},startEdit(s){this.editUser={...s}},updateUser(){u.post("/user/update",this.editUser).then(s=>{s.data.status===200?(a.success("更新成功"),this.fetchUsers(),this.editUser=null):a.error(s.data.message)})}},created(){this.fetchUsers()}},y={class:"modal",style:{width:"1000px"}};function k(s,t,B,C,r,p){const m=o("el-input"),i=o("el-form-item"),c=o("el-button"),_=o("el-form"),n=o("el-table-column"),U=o("el-table");return b(),w("div",y,[t[4]||(t[4]=x("h2",null,"用户管理",-1)),e(_,{style:{width:"600px"}},{default:l(()=>[e(i,{label:"用户名"},{default:l(()=>[e(m,{modelValue:r.newUser.name,"onUpdate:modelValue":t[0]||(t[0]=d=>r.newUser.name=d),required:""},null,8,["modelValue"])]),_:1}),e(i,{label:"密码"},{default:l(()=>[e(m,{modelValue:r.newUser.password,"onUpdate:modelValue":t[1]||(t[1]=d=>r.newUser.password=d),type:"password",required:""},null,8,["modelValue"])]),_:1}),e(i,null,{default:l(()=>[e(c,{type:"primary",size:"small",onClick:p.addUser},{default:l(()=>t[2]||(t[2]=[f("添加")])),_:1},8,["onClick"])]),_:1})]),_:1}),e(U,{data:r.users,style:{width:"1000px"}},{default:l(()=>[e(n,{prop:"id",label:"编号"}),e(n,{prop:"name",label:"用户名"}),e(n,{prop:"email",label:"邮箱"}),e(n,{prop:"password",label:"密码"}),e(n,{label:"操作"},{default:l(d=>[e(c,{size:"small",type:"danger",onClick:E=>p.deleteUser(d)},{default:l(()=>t[3]||(t[3]=[f("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])}const N=h(g,[["render",k]]);export{N as default};
