import{_ as h,c as k,o as g,h as f,f as t,b as i,d,e as u,E as r,a as w,i as C,g as c,t as x}from"./index-oqa1SwAd.js";const z={data(){return{addName:"",dialogVisible1:!1,user:JSON.parse(localStorage.getItem("user")).user,organizations:[{name:"组织1",createTime:"2023-01-01 12:00:00",description:"这是一个公开的组织",members:[{name:"用户A",role:"管理员"},{name:"用户B",role:"成员"}]},{name:"组织2",createTime:"2023-02-01 13:00:00",description:"这是一个私有的组织",members:[{name:"用户C",role:"管理员"},{name:"用户D",role:"成员"}]}],dialogVisible:!1,selectedOrganization:{},row:null}},methods:{add(){u.post("/ori/addUser/"+this.addName+"/"+this.row.id).then(l=>{l.data.status==200?(location.reload(),r("Success")):r(l.data.message)})},handleRowClick(l){this.selectedOrganization=l,this.dialogVisible=!0},addOrzUser(l){this.row=l,this.dialogVisible1=!0},exit(l){u.post("/ori/exit/"+this.user.id+"/"+l).then(e=>{e.data.status==200?r("Success"):r(e.data.message)})}},created(){u.post("/ori/getMyOrifization/"+this.user.id).then(l=>{l.data.status==200&&(this.organizations=l.data.data,console.log(this.organizations))})}},N={style:{width:"1000px"}};function O(l,e,y,U,o,n){const s=d("el-table-column"),m=d("el-button"),p=d("el-table"),b=d("el-dialog"),_=d("el-input");return g(),k("div",N,[e[6]||(e[6]=f("h2",null,"我的组织",-1)),t(p,{data:o.organizations,style:{width:"1000px"},onRowDblclick:n.handleRowClick},{default:i(()=>[t(s,{prop:"name",label:"名称",width:"200"}),t(s,{prop:"createTime",label:"创建时间",width:"200"}),t(s,{prop:"description",label:"描述"}),t(s,{label:"操作"},{default:i(({row:a})=>[t(m,{onClick:V=>n.exit(a.id)},{default:i(()=>e[3]||(e[3]=[c("退出")])),_:2},1032,["onClick"]),a.creatorId==o.user.id?(g(),w(m,{key:0,onClick:V=>n.addOrzUser(a)},{default:i(()=>e[4]||(e[4]=[c("添加成员")])),_:2},1032,["onClick"])):C("",!0)]),_:1})]),_:1},8,["data","onRowDblclick"]),t(b,{title:"成员信息",modelValue:o.dialogVisible,"onUpdate:modelValue":e[0]||(e[0]=a=>o.dialogVisible=a),width:"50%"},{default:i(()=>[t(p,{data:o.selectedOrganization.members,style:{width:"100%"}},{default:i(()=>[t(s,{prop:"name",label:"成员名称",width:"200"}),t(s,{label:"角色"},{default:i(({row:a})=>[f("span",null,x(o.selectedOrganization.creatorId==a.id?"管理员":"成员"),1)]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"]),t(b,{title:"添加成员",modelValue:o.dialogVisible1,"onUpdate:modelValue":e[2]||(e[2]=a=>o.dialogVisible1=a),width:"50%"},{default:i(()=>[t(_,{placeholder:"用户名",modelValue:o.addName,"onUpdate:modelValue":e[1]||(e[1]=a=>o.addName=a)},null,8,["modelValue"]),t(m,{onClick:n.add},{default:i(()=>e[5]||(e[5]=[c("确定")])),_:1},8,["onClick"])]),_:1},8,["modelValue"])])}const B=h(z,[["render",O],["__scopeId","data-v-3fb4f1c1"]]);export{B as default};
