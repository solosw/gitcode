import{_ as h,c as K,o as g,h as d,f as t,b as s,d as a,F as k,e as m,E as u,g as b}from"./index-CeHthxjz.js";const x={data(){return{publicKey:"",user:JSON.parse(localStorage.getItem("user")).user,key:null,name:"",myPublicKeys:[{keyName:"工作用公钥",publicKey:"ssh-rsa AAA..."},{keyName:"个人用公钥",publicKey:"ssh-rsa BBB..."}]}},props:{},methods:{submit(){m.post("/ssh/createPublicKey",{creatorId:this.user.id,publicKey:this.publicKey,keyName:this.name}).then(l=>{l.data.status==200?(u("Success"),this.getUserKey()):u(l.data.message)})},getUserKey(){m.post("/ssh/getUserKey/"+this.user.id).then(l=>{l.data.status==200?this.myPublicKeys=l.data.data:u(l.data.message)})},handleDelete(l){m.post("/ssh/deleteKey/"+this.user.id+"/"+l.id).then(e=>{e.data.status==200?(u.success("成功"),location.reload()):u(e.data.message)})}},created(){this.getUserKey()}};function V(l,e,w,N,o,p){const c=a("el-input"),r=a("el-form-item"),y=a("el-button"),_=a("el-form"),i=a("el-table-column"),f=a("el-table");return g(),K(k,null,[d("div",null,[e[3]||(e[3]=d("h2",null,"公钥设置",-1)),t(_,{"label-width":"100px",style:{width:"600px"}},{default:s(()=>[t(r,{label:"名称"},{default:s(()=>[t(c,{modelValue:o.name,"onUpdate:modelValue":e[0]||(e[0]=n=>o.name=n),placeholder:"公钥名称"},null,8,["modelValue"])]),_:1}),t(r,{label:"公钥"},{default:s(()=>[t(c,{type:"textarea",modelValue:o.publicKey,"onUpdate:modelValue":e[1]||(e[1]=n=>o.publicKey=n),placeholder:"支持ssh-rsa开头",rows:"5"},null,8,["modelValue"])]),_:1}),t(r,null,{default:s(()=>[t(y,{type:"primary",onClick:p.submit},{default:s(()=>e[2]||(e[2]=[b("提交")])),_:1},8,["onClick"])]),_:1})]),_:1})]),e[5]||(e[5]=d("h2",null,"我的公钥",-1)),t(f,{data:o.myPublicKeys,width:"600"},{default:s(()=>[t(i,{prop:"name",label:"名称"}),t(i,{prop:"publicKey",label:"公钥","show-overflow-tooltip":""}),t(i,{label:"操作"},{default:s(n=>[t(y,{onClick:B=>p.handleDelete(n.row),type:"text",size:"small"},{default:s(()=>e[4]||(e[4]=[b("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])],64)}const U=h(x,[["render",V]]);export{U as default};
